{
  "timestamp":"%{begin:%Y-%m-%dT%H:%M:%S}t.%{msec_frac}t",
  "sdk_version":"%{json.escape(urldecode(subfield(req.url.qs, "sdk", "&")))}V",
  "sdk_api_key":"%{json.escape(urldecode(subfield(req.url.qs, "key", "&")))}V",
  "endpoint_version":"1.1.0",
  "action":"%{json.escape(urldecode(subfield(req.url.qs, "action", "&")))}V",
  "category":"%{json.escape(urldecode(subfield(req.url.qs, "category", "&")))}V",
  "cookie":"%{json.escape(if(subfield(req.url.qs, "ck", "&") != "false", "true", "false"))}V",
  "consent":"%{json.escape(urldecode(subfield(req.url.qs, "consent", "&")))}V",
  "request_id":"%{digest.hash_sha256(req.url)}V",
  "ingestly_id":"%{json.escape(if(req.http.Cookie:ingestlyId, req.http.Cookie:ingestlyId, subfield(req.url.qs, "rootId", "&")))}V",
  "session_id":"%{json.escape(if(req.http.Cookie:ingestlySes, req.http.Cookie:ingestlySes, subfield(req.url.qs, "rootId", "&")))}V",
  "is_id_new":"%{json.escape(if(req.http.Cookie:ingestlyId && subfield(req.url.qs, "ck", "&") != "false", "false", "true"))}V",
  "is_session_new":"%{json.escape(if(req.http.Cookie:ingestlySes && subfield(req.url.qs, "ck", "&") != "false", "false", "true"))}V",
  "root_id":"%{json.escape(urldecode(subfield(req.url.qs, "rootId", "&")))}V",
  "since_init_ms":"%{if(subfield(req.url.qs, "sinceInitMs", "&"), subfield(req.url.qs, "sinceInitMs", "&"), "-1")}V",
  "since_prev_ms":"%{if(subfield(req.url.qs, "sincePrevMs", "&"), subfield(req.url.qs, "sincePrevMs", "&"), "-1")}V",
  "client_ip":"%{req.http.Fastly-Client-IP}V",
  "user_agent":"%{json.escape(req.http.User-Agent)}V",
  "user_id":"%{json.escape(urldecode(subfield(req.url.qs, "usId", "&")))}V",
  "user_status":"%{json.escape(urldecode(subfield(req.url.qs, "usStatus", "&")))}V",
  "user_attr":"%{json.escape(urldecode(subfield(req.url.qs, "usAttr", "&")))}V",
  "page_url":"%{json.escape(urldecode(subfield(req.url.qs, "pgUrl", "&")))}V",
  "page_referrer":"%{json.escape(urldecode(subfield(req.url.qs, "pgRef", "&")))}V",
  "page_title":"%{json.escape(urldecode(subfield(req.url.qs, "pgTitle", "&")))}V",
  "page_attr":"%{json.escape(urldecode(subfield(req.url.qs, "pgAttr", "&")))}V",
  "content_id":"%{json.escape(urldecode(subfield(req.url.qs, "cnId", "&")))}V",
  "content_headline":"%{json.escape(urldecode(subfield(req.url.qs, "cnHeadline", "&")))}V",
  "content_status":"%{json.escape(urldecode(subfield(req.url.qs, "cnStatus", "&")))}V",
  "content_attr":"%{json.escape(urldecode(subfield(req.url.qs, "cnAttr", "&")))}V",
  "viewport_height":"%{if(subfield(req.url.qs, "vpHeight", "&"), subfield(req.url.qs, "vpHeight", "&"), "-1")}V",
  "viewport_width":"%{if(subfield(req.url.qs, "vpWidth", "&"), subfield(req.url.qs, "vpWidth", "&"), "-1")}V",
  "screen_height":"%{if(subfield(req.url.qs, "scHeight", "&"), subfield(req.url.qs, "scHeight", "&"), "-1")}V",
  "screen_width":"%{if(subfield(req.url.qs, "scWidth", "&"), subfield(req.url.qs, "scWidth", "&"), "-1")}V",
  "screen_orientation":"%{json.escape(urldecode(subfield(req.url.qs, "scOrientation", "&")))}V",
  "device_type":"%{json.escape(client.platform.hwtype)}V",
  "device_is_bot":"%{client.class.bot}V",
  "device_bot_name":"%{json.escape(client.bot.name)}V",
  "device_os_name":"%{json.escape(client.os.name)}V",
  "device_os_version":"%{json.escape(client.os.version)}V",
  "device_browser_name":"%{json.escape(client.browser.name)}V",
  "device_browser_version":"%{json.escape(client.browser.version)}V",
  "timing_interactive":"%{if(subfield(req.url.qs, "ptTti", "&"), json.escape(subfield(req.url.qs, "ptTti", "&")), "-1")}V",
  "timing_dcl":"%{if(subfield(req.url.qs, "ptDcl", "&"), json.escape(subfield(req.url.qs, "ptDcl", "&")), "-1")}V",
  "timing_complete":"%{if(subfield(req.url.qs, "ptComplete", "&"), json.escape(subfield(req.url.qs, "ptComplete", "&")), "-1")}V",
  "timing_elapsed_ms":"%{if(subfield(req.url.qs, "ptElapsedMs", "&"), json.escape(subfield(req.url.qs, "ptElapsedMs", "&")), "-1")}V",
  "navigation_type":"%{if(subfield(req.url.qs, "nvType", "&"), json.escape(subfield(req.url.qs, "nvType", "&")), "-1")}V",
  "navigation_redirect_count":"%{if(subfield(req.url.qs, "nvRdCnt", "&"), json.escape(subfield(req.url.qs, "nvRdCnt", "&")), "-1")}V",
  "page_height":"%{if(subfield(req.url.qs, "pgH", "&"), subfield(req.url.qs, "pgH", "&"), "-1")}V",
  "scroll_depth":"%{if(subfield(req.url.qs, "srDepth", "&"), subfield(req.url.qs, "srDepth", "&"), "-1")}V",
  "scroll_unit":"%{json.escape(urldecode(subfield(req.url.qs, "srUnit", "&")))}V",
  "read_target_index":"%{if(subfield(req.url.qs, "rdIdx", "&"), subfield(req.url.qs, "rdIdx", "&"), "-1")}V",
  "read_target_id":"%{json.escape(urldecode(subfield(req.url.qs, "rdId", "&")))}V",
  "read_text_start_with":"%{json.escape(urldecode(subfield(req.url.qs, "rdTxS", "&")))}V",
  "read_rate":"%{if(subfield(req.url.qs, "rdRate", "&"), subfield(req.url.qs, "rdRate", "&"), "-1")}V",
  "read_text_length":"%{if(subfield(req.url.qs, "rdTxL", "&"), subfield(req.url.qs, "rdTxL", "&"), "-1")}V",
  "read_content_height":"%{if(subfield(req.url.qs, "rdTgH", "&"), subfield(req.url.qs, "rdTgH", "&"), "-1")}V",
  "read_attr":"%{json.escape(urldecode(subfield(req.url.qs, "rdAttr", "&")))}V",
  "click_tag":"%{json.escape(urldecode(subfield(req.url.qs, "clTag", "&")))}V",
  "click_id":"%{json.escape(urldecode(subfield(req.url.qs, "clId", "&")))}V",
  "click_class":"%{json.escape(urldecode(subfield(req.url.qs, "clClass", "&")))}V",
  "click_path":"%{json.escape(urldecode(subfield(req.url.qs, "clPath", "&")))}V",
  "click_link":"%{json.escape(urldecode(subfield(req.url.qs, "clLink", "&")))}V",
  "click_text":"%{json.escape(urldecode(subfield(req.url.qs, "clText", "&")))}V",
  "click_attr":"%{json.escape(urldecode(subfield(req.url.qs, "clAttr", "&")))}V",
  "media_src":"%{json.escape(urldecode(subfield(req.url.qs, "mdSrc", "&")))}V",
  "media_current_time":"%{if(subfield(req.url.qs, "mdCurrentTime", "&"), subfield(req.url.qs, "mdCurrentTime", "&"), "-1")}V",
  "media_duration":"%{if(subfield(req.url.qs, "mdDuration", "&"), subfield(req.url.qs, "mdDuration", "&"), "-1")}V",
  "media_played_percent":"%{if(subfield(req.url.qs, "mdPlayedPercent", "&"), subfield(req.url.qs, "mdPlayedPercent", "&"), "-1")}V",
  "media_attr":"%{json.escape(urldecode(subfield(req.url.qs, "mdAttr", "&")))}V",
  "form_name":"%{json.escape(urldecode(subfield(req.url.qs, "fmName", "&")))}V",
  "form_items":"%{json.escape(urldecode(subfield(req.url.qs, "fmItems", "&")))}V",
  "form_first_item":"%{json.escape(urldecode(subfield(req.url.qs, "fmFirstItem", "&")))}V",
  "form_last_item":"%{json.escape(urldecode(subfield(req.url.qs, "fmLastItem", "&")))}V",
  "form_started_since_init_ms":"%{if(subfield(req.url.qs, "fmStartedSinceInitMs", "&"), subfield(req.url.qs, "fmStartedSinceInitMs", "&"), "-1")}V",
  "form_ended_since_init_ms":"%{if(subfield(req.url.qs, "fmEndedSinceInitMs", "&"), subfield(req.url.qs, "fmEndedSinceInitMs", "&"), "-1")}V",
  "form_duration_ms":"%{if(subfield(req.url.qs, "fmDurationMs", "&"), subfield(req.url.qs, "fmDurationMs", "&"), "-1")}V",
  "form_attr":"%{json.escape(urldecode(subfield(req.url.qs, "fmAttr", "&")))}V",
  "campaign_code":"%{json.escape(urldecode(subfield(req.url.qs, "cpCode", "&")))}V",
  "campaign_name":"%{json.escape(urldecode(subfield(req.url.qs, "cpName", "&")))}V",
  "campaign_source":"%{json.escape(urldecode(subfield(req.url.qs, "cpSource", "&")))}V",
  "campaign_medium":"%{json.escape(urldecode(subfield(req.url.qs, "cpMedium", "&")))}V",
  "campaign_term":"%{json.escape(urldecode(subfield(req.url.qs, "cpTerm", "&")))}V",
  "campaign_content":"%{json.escape(urldecode(subfield(req.url.qs, "cpContent", "&")))}V",
  "url_protocol":"%{json.escape(urldecode(subfield(req.url.qs, "urProtocol", "&")))}V",
  "url_hostname":"%{json.escape(urldecode(subfield(req.url.qs, "urHost", "&")))}V",
  "url_pathname":"%{json.escape(urldecode(subfield(req.url.qs, "urPath", "&")))}V",
  "url_search":"%{json.escape(urldecode(subfield(req.url.qs, "urSearch", "&")))}V",
  "url_hash":"%{json.escape(urldecode(subfield(req.url.qs, "urHash", "&")))}V",
  "url_query":"%{json.escape(urldecode(subfield(req.url.qs, "urQuery", "&")))}V",
  "referrer_protocol":"%{json.escape(urldecode(subfield(req.url.qs, "rfProtocol", "&")))}V",
  "referrer_hostname":"%{json.escape(urldecode(subfield(req.url.qs, "rfHost", "&")))}V",
  "referrer_pathname":"%{json.escape(urldecode(subfield(req.url.qs, "rfPath", "&")))}V",
  "referrer_search":"%{json.escape(urldecode(subfield(req.url.qs, "rfSearch", "&")))}V",
  "referrer_hash":"%{json.escape(urldecode(subfield(req.url.qs, "rfHash", "&")))}V",
  "referrer_query":"%{json.escape(urldecode(subfield(req.url.qs, "rfQuery", "&")))}V",
  "survey_name":"%{json.escape(urldecode(subfield(req.url.qs, "svName", "&")))}V",
  "survey_result":"%{json.escape(urldecode(subfield(req.url.qs, "svResult", "&")))}V",
  "o2o_name":"%{json.escape(urldecode(subfield(req.url.qs, "ooName", "&")))}V",
  "o2o_scanner":"%{json.escape(urldecode(subfield(req.url.qs, "ooScanner", "&")))}V",
  "o2o_key":"%{json.escape(urldecode(subfield(req.url.qs, "ooKey", "&")))}V",
  "o2o_result":"%{json.escape(urldecode(subfield(req.url.qs, "ooResult", "&")))}V",
  "custom_attr":"%{json.escape(urldecode(subfield(req.url.qs, "customAttr", "&")))}V",
  "is_tls":%{if(req.is_ssl, "true", "false")}V,
  "is_ipv6":%{if(req.is_ipv6, "true", "false")}V,
  "request_accept_language":"%{json.escape(req.http.Accept-Language)}V",
  "request_accept_charset":"%{json.escape(req.http.Accept-Charset)}V",
  "request_referer":"%{json.escape(req.http.Referer)}V",
  "geo_continent_code":"%{client.geo.continent_code}V",
  "geo_region":"%{client.geo.region}V",
  "geo_country_name":"%{client.geo.country_name}V",
  "geo_country_code":"%{client.geo.country_code}V",
  "geo_postal_code":"%{client.geo.postal_code}V",
  "geo_city":"%{client.geo.city}V",
  "geo_latitude":"%{client.geo.latitude}V",
  "geo_longitude":"%{client.geo.longitude}V",
  "geo_gmt_offset":"%{client.geo.gmt_offset}V",
  "geo_conn_speed":"%{client.geo.conn_speed}V",
  "server_datacenter":"%{server.datacenter}V",
  "server_region":"%{server.region}V"
}
